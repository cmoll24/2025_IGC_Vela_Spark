[gd_scene load_steps=12 format=3 uid="uid://cdiurkf4830i2"]

[ext_resource type="Script" uid="uid://bddlppbo5a7i4" path="res://src/boss/boss.gd" id="1_3kou8"]
[ext_resource type="Script" uid="uid://cvisiyccpem42" path="res://src/boss/bossStateMachine.gd" id="2_trtgp"]
[ext_resource type="Script" uid="uid://b2tw3xmq2dmkd" path="res://src/boss/boss_states/idleState.gd" id="3_0wgbl"]
[ext_resource type="Script" uid="uid://bwol4gnh5hoit" path="res://src/boss/boss_states/moveState.gd" id="4_qh7uy"]
[ext_resource type="Script" uid="uid://dpuar77scsx66" path="res://src/boss/boss_states/teleportState.gd" id="5_f33m0"]
[ext_resource type="Script" uid="uid://dbt6p8iuumtcu" path="res://src/boss/boss_states/aimAttack.gd" id="6_uiuc5"]
[ext_resource type="Script" uid="uid://w23uns11vmqo" path="res://src/boss/boss_states/barageAttack.gd" id="7_ejgj4"]
[ext_resource type="Script" uid="uid://c0xi0mepfssc" path="res://src/boss/boss_states/porcupineHeal.gd" id="8_ranff"]
[ext_resource type="Script" uid="uid://ji2we2m2t53t" path="res://src/boss/boss_states/chargeState.gd" id="9_fbeph"]

[sub_resource type="RectangleShape2D" id="RectangleShape2D_xw3os"]
size = Vector2(400, 379)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_qh7uy"]
size = Vector2(371, 359)

[node name="Boss" type="CharacterBody2D"]
collision_layer = 4
script = ExtResource("1_3kou8")

[node name="ColorRect" type="ColorRect" parent="."]
offset_left = -201.0
offset_top = -177.0
offset_right = 201.0
offset_bottom = 200.0
color = Color(0.7058824, 0, 0, 1)

[node name="CollisionShape2D" type="CollisionShape2D" parent="."]
position = Vector2(0, 10.5)
shape = SubResource("RectangleShape2D_xw3os")

[node name="boss_hitbox" type="Area2D" parent="."]
collision_layer = 4
collision_mask = 2

[node name="hitbox_collision_shape" type="CollisionShape2D" parent="boss_hitbox"]
position = Vector2(-0.5, 12.5)
shape = SubResource("RectangleShape2D_qh7uy")

[node name="Phase1StateMachine" type="Node" parent="." node_paths=PackedStringArray("initial_state", "debug_state_label")]
script = ExtResource("2_trtgp")
initial_state = NodePath("IdleState")
debug_state_label = NodePath("../Debug")
metadata/_custom_type_script = "uid://cvisiyccpem42"

[node name="IdleState" type="Node" parent="Phase1StateMachine" node_paths=PackedStringArray("boss")]
script = ExtResource("3_0wgbl")
boss = NodePath("../..")
metadata/_custom_type_script = "uid://b2tw3xmq2dmkd"

[node name="MoveState" type="Node" parent="Phase1StateMachine" node_paths=PackedStringArray("boss")]
script = ExtResource("4_qh7uy")
boss = NodePath("../..")
metadata/_custom_type_script = "uid://bwol4gnh5hoit"

[node name="TeleportState" type="Node" parent="Phase1StateMachine" node_paths=PackedStringArray("boss")]
script = ExtResource("5_f33m0")
boss = NodePath("../..")
metadata/_custom_type_script = "uid://dpuar77scsx66"

[node name="AimAttack" type="Node" parent="Phase1StateMachine" node_paths=PackedStringArray("boss")]
script = ExtResource("6_uiuc5")
boss = NodePath("../..")
metadata/_custom_type_script = "uid://dbt6p8iuumtcu"

[node name="BarageAttack" type="Node" parent="Phase1StateMachine" node_paths=PackedStringArray("boss")]
script = ExtResource("7_ejgj4")
boss = NodePath("../..")
metadata/_custom_type_script = "uid://w23uns11vmqo"

[node name="PorcupineHeal" type="Node" parent="Phase1StateMachine" node_paths=PackedStringArray("boss")]
script = ExtResource("8_ranff")
boss = NodePath("../..")
metadata/_custom_type_script = "uid://c0xi0mepfssc"

[node name="ChargeState" type="Node" parent="Phase1StateMachine" node_paths=PackedStringArray("boss")]
script = ExtResource("9_fbeph")
boss = NodePath("../..")
metadata/_custom_type_script = "uid://ji2we2m2t53t"

[node name="Debug" type="Label" parent="."]
offset_left = -104.0
offset_top = -28.0
offset_bottom = -5.0
scale = Vector2(2, 2)
text = "Current State"

[node name="Health" type="Label" parent="."]
offset_left = -104.0
offset_top = 12.0
offset_bottom = 35.0
scale = Vector2(2, 2)
text = "Health"
horizontal_alignment = 1

[node name="RightWallCheck" type="RayCast2D" parent="."]
position = Vector2(0, 152)
target_position = Vector2(400, 0)

[node name="RightWallCheck2" type="RayCast2D" parent="."]
position = Vector2(0, -128)
target_position = Vector2(400, 0)

[node name="LeftWallCheck" type="RayCast2D" parent="."]
position = Vector2(0, 152)
target_position = Vector2(-400, 0)

[node name="LeftWallCheck2" type="RayCast2D" parent="."]
position = Vector2(0, -128)
target_position = Vector2(-400, 0)

[connection signal="body_entered" from="boss_hitbox" to="." method="_on_boss_hitbox_body_entered"]
