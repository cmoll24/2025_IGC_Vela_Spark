[gd_scene load_steps=49 format=3 uid="uid://cdiurkf4830i2"]

[ext_resource type="Script" uid="uid://bddlppbo5a7i4" path="res://src/boss/boss.gd" id="1_3kou8"]
[ext_resource type="Script" uid="uid://cvisiyccpem42" path="res://src/boss/bossStateMachine.gd" id="2_trtgp"]
[ext_resource type="Script" uid="uid://b2tw3xmq2dmkd" path="res://src/boss/boss_states/idleState.gd" id="3_0wgbl"]
[ext_resource type="Texture2D" uid="uid://cdoxew32dx2vb" path="res://assets/boss/walk/boss_walk-4.png" id="3_sp2nh"]
[ext_resource type="Texture2D" uid="uid://ctu7crktvrns8" path="res://assets/boss/walk/boss_walk-1.png" id="4_8qg8b"]
[ext_resource type="Texture2D" uid="uid://bmd2wb7bv3jm7" path="res://assets/boss/teleport/Teleport_Animation-1.png" id="4_eu3tv"]
[ext_resource type="Texture2D" uid="uid://bgiwaq1uy06s6" path="res://assets/boss/volley/boss_volley-5.png" id="4_g7m01"]
[ext_resource type="Script" uid="uid://bwol4gnh5hoit" path="res://src/boss/boss_states/moveState.gd" id="4_qh7uy"]
[ext_resource type="Texture2D" uid="uid://d1vyllj10sbt6" path="res://assets/boss/walk/boss_walk-2.png" id="5_8ajuv"]
[ext_resource type="Script" uid="uid://dpuar77scsx66" path="res://src/boss/boss_states/teleportState.gd" id="5_f33m0"]
[ext_resource type="Texture2D" uid="uid://by1c0jxr6d5er" path="res://assets/boss/volley/boss_volley-4.png" id="5_muxuo"]
[ext_resource type="Texture2D" uid="uid://djgrvepa57x1c" path="res://assets/boss/teleport/Teleport_Animation-2.png" id="5_txgae"]
[ext_resource type="Texture2D" uid="uid://0ebtsmw56b3f" path="res://assets/boss/walk/boss_walk-3.png" id="6_h40u0"]
[ext_resource type="Texture2D" uid="uid://di7a0omow12qi" path="res://assets/boss/teleport/Teleport_Animation-3.png" id="6_oh0qo"]
[ext_resource type="Script" uid="uid://dbt6p8iuumtcu" path="res://src/boss/boss_states/aimAttack.gd" id="6_uiuc5"]
[ext_resource type="Texture2D" uid="uid://dc77t8cds77s0" path="res://assets/boss/volley/boss_volley-3.png" id="6_yahjj"]
[ext_resource type="Texture2D" uid="uid://dctjmwsw6shll" path="res://assets/boss/teleport/Teleport_Animation-4.png" id="7_0p4ks"]
[ext_resource type="Script" uid="uid://w23uns11vmqo" path="res://src/boss/boss_states/barageAttack.gd" id="7_ejgj4"]
[ext_resource type="Texture2D" uid="uid://qrf2g0yrgoto" path="res://assets/boss/volley/boss_volley-2.png" id="7_gcy47"]
[ext_resource type="Texture2D" uid="uid://b0hedrisejuo0" path="res://assets/boss/teleport/Teleport_Animation-5.png" id="8_3yy7r"]
[ext_resource type="Script" uid="uid://bh5d3cnj1qqkb" path="res://src/boss/boss_states/laserAttack.gd" id="8_ranff"]
[ext_resource type="Texture2D" uid="uid://v77nq4dretbi" path="res://assets/boss/volley/boss_volley-1.png" id="8_ryyt3"]
[ext_resource type="Texture2D" uid="uid://ckuivrg0tlik6" path="res://assets/boss/teleport/Teleport_Animation-6.png" id="9_vfjwa"]
[ext_resource type="Texture2D" uid="uid://dfvq35chg6nw" path="res://assets/boss/teleport/Teleport_Animation-7.png" id="10_4t5jb"]
[ext_resource type="Script" uid="uid://ji2we2m2t53t" path="res://src/boss/boss_states/chargeState.gd" id="10_7byyt"]
[ext_resource type="Texture2D" uid="uid://d1ubcgj86cssb" path="res://assets/debug/boss.png" id="10_j3b7s"]
[ext_resource type="Script" uid="uid://cpsc7j104fhtp" path="res://src/boss/boss_states/straightAttack.gd" id="11_7byyt"]
[ext_resource type="Texture2D" uid="uid://c8udu7lsdabdn" path="res://assets/boss/teleport/Teleport_Animation-8.png" id="11_8d4sl"]
[ext_resource type="Texture2D" uid="uid://bogf6m4uw0to6" path="res://assets/boss/teleport/Teleport_Animation-9.png" id="12_btocc"]
[ext_resource type="Texture2D" uid="uid://dsxamm3ju4dki" path="res://assets/boss/teleport/Teleport_Animation-10.png" id="13_dcrvn"]
[ext_resource type="Texture2D" uid="uid://ciml6bryrh7fu" path="res://assets/boss/teleport/Teleport_Animation-11.png" id="14_gh3ja"]
[ext_resource type="Texture2D" uid="uid://bio5qahj1pojx" path="res://assets/boss/teleport/Teleport_Animation-12.png" id="15_ugnsp"]
[ext_resource type="Script" uid="uid://b43e60pq7pn5t" path="res://src/boss/boss_states/boomerangAttack.gd" id="16_8qg8b"]
[ext_resource type="Texture2D" uid="uid://d1kd21fbuascb" path="res://assets/boss/teleport/Teleport_Animation-13.png" id="16_52ov8"]
[ext_resource type="Texture2D" uid="uid://cvymp3r6l5xlf" path="res://assets/boss/teleport/Teleport_Animation-14.png" id="17_7tb71"]
[ext_resource type="Texture2D" uid="uid://cbx782jqfsp00" path="res://assets/boss/teleport/Teleport_Animation-15.png" id="18_4lhsw"]
[ext_resource type="Texture2D" uid="uid://dtlxhsygyd5ga" path="res://assets/boss/teleport/Teleport_Animation-16.png" id="19_w1gcl"]
[ext_resource type="Texture2D" uid="uid://c45fgp524v1x3" path="res://assets/boss/teleport/Teleport_Animation-17.png" id="20_lj0n1"]
[ext_resource type="Texture2D" uid="uid://c622s1hf5y8b2" path="res://assets/boss/teleport/Teleport_Animation-18.png" id="21_c2vm8"]
[ext_resource type="Texture2D" uid="uid://dnxnbf6nnsdha" path="res://assets/boss/teleport/Teleport_Animation-19.png" id="22_16ob0"]
[ext_resource type="AudioStream" uid="uid://dpegsd0vijifp" path="res://assets/sound/BossHurtSound.mp3" id="22_muxuo"]
[ext_resource type="AudioStream" uid="uid://ctlxe26lmp056" path="res://assets/sound/BossDeathSound.mp3" id="23_yahjj"]

[sub_resource type="SpriteFrames" id="SpriteFrames_2vrfn"]
animations = [{
"frames": [{
"duration": 1.0,
"texture": ExtResource("3_sp2nh")
}],
"loop": true,
"name": &"idle",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": ExtResource("4_eu3tv")
}, {
"duration": 1.0,
"texture": ExtResource("5_txgae")
}, {
"duration": 1.0,
"texture": ExtResource("6_oh0qo")
}, {
"duration": 1.0,
"texture": ExtResource("7_0p4ks")
}, {
"duration": 1.0,
"texture": ExtResource("8_3yy7r")
}, {
"duration": 1.0,
"texture": ExtResource("9_vfjwa")
}, {
"duration": 1.0,
"texture": ExtResource("10_4t5jb")
}, {
"duration": 1.0,
"texture": ExtResource("11_8d4sl")
}, {
"duration": 1.0,
"texture": ExtResource("12_btocc")
}, {
"duration": 1.0,
"texture": ExtResource("13_dcrvn")
}, {
"duration": 1.0,
"texture": ExtResource("14_gh3ja")
}, {
"duration": 1.0,
"texture": ExtResource("15_ugnsp")
}, {
"duration": 1.0,
"texture": ExtResource("16_52ov8")
}, {
"duration": 1.0,
"texture": ExtResource("17_7tb71")
}, {
"duration": 1.0,
"texture": ExtResource("18_4lhsw")
}, {
"duration": 1.0,
"texture": ExtResource("19_w1gcl")
}, {
"duration": 1.0,
"texture": ExtResource("20_lj0n1")
}, {
"duration": 1.0,
"texture": ExtResource("21_c2vm8")
}, {
"duration": 1.0,
"texture": ExtResource("22_16ob0")
}],
"loop": false,
"name": &"teleport_appear",
"speed": 15.0
}, {
"frames": [{
"duration": 3.0,
"texture": ExtResource("22_16ob0")
}, {
"duration": 2.0,
"texture": ExtResource("21_c2vm8")
}, {
"duration": 1.0,
"texture": ExtResource("20_lj0n1")
}, {
"duration": 1.0,
"texture": ExtResource("19_w1gcl")
}, {
"duration": 1.0,
"texture": ExtResource("18_4lhsw")
}, {
"duration": 1.0,
"texture": ExtResource("17_7tb71")
}, {
"duration": 1.0,
"texture": ExtResource("16_52ov8")
}, {
"duration": 1.0,
"texture": ExtResource("15_ugnsp")
}, {
"duration": 1.0,
"texture": ExtResource("14_gh3ja")
}, {
"duration": 1.0,
"texture": ExtResource("13_dcrvn")
}, {
"duration": 1.0,
"texture": ExtResource("12_btocc")
}, {
"duration": 1.0,
"texture": ExtResource("11_8d4sl")
}, {
"duration": 1.0,
"texture": ExtResource("10_4t5jb")
}, {
"duration": 1.0,
"texture": ExtResource("9_vfjwa")
}, {
"duration": 1.0,
"texture": ExtResource("8_3yy7r")
}, {
"duration": 1.0,
"texture": ExtResource("7_0p4ks")
}, {
"duration": 1.0,
"texture": ExtResource("6_oh0qo")
}, {
"duration": 1.0,
"texture": ExtResource("5_txgae")
}, {
"duration": 1.0,
"texture": ExtResource("4_eu3tv")
}],
"loop": false,
"name": &"teleport_disappear",
"speed": 20.0
}, {
"frames": [{
"duration": 1.0,
"texture": ExtResource("4_g7m01")
}, {
"duration": 1.0,
"texture": ExtResource("5_muxuo")
}, {
"duration": 1.0,
"texture": ExtResource("6_yahjj")
}, {
"duration": 1.0,
"texture": ExtResource("7_gcy47")
}, {
"duration": 1.0,
"texture": ExtResource("8_ryyt3")
}],
"loop": false,
"name": &"volley",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": ExtResource("6_h40u0")
}, {
"duration": 1.0,
"texture": ExtResource("5_8ajuv")
}, {
"duration": 1.0,
"texture": ExtResource("4_8qg8b")
}],
"loop": true,
"name": &"walk",
"speed": 5.0
}]

[sub_resource type="RectangleShape2D" id="RectangleShape2D_xw3os"]
size = Vector2(500, 368.25)

[sub_resource type="CapsuleShape2D" id="CapsuleShape2D_7byyt"]
radius = 131.0
height = 464.0

[sub_resource type="Animation" id="Animation_ryyt3"]
length = 0.001
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("flippable:position")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [Vector2(0, 0)]
}

[sub_resource type="Animation" id="Animation_gcy47"]
resource_name = "death"
length = 6.0
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("flippable:position")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 4.0333333),
"transitions": PackedFloat32Array(1, 1),
"update": 0,
"values": [Vector2(0, 0), Vector2(0, 400)]
}

[sub_resource type="AnimationLibrary" id="AnimationLibrary_cyc2r"]
_data = {
&"RESET": SubResource("Animation_ryyt3"),
&"death": SubResource("Animation_gcy47")
}

[node name="Boss" type="CharacterBody2D"]
collision_layer = 4
script = ExtResource("1_3kou8")

[node name="ColorRect" type="ColorRect" parent="."]
visible = false
offset_left = -201.0
offset_top = -177.0
offset_right = 201.0
offset_bottom = 200.0
color = Color(0.7058824, 0, 0, 1)

[node name="flippable" type="Node2D" parent="."]

[node name="Sprite2D" type="Sprite2D" parent="flippable"]
visible = false
position = Vector2(12, 11.999992)
scale = Vector2(0.9, 0.9)
texture = ExtResource("10_j3b7s")

[node name="AnimatedSprite2D" type="AnimatedSprite2D" parent="flippable"]
scale = Vector2(0.7, 0.7)
sprite_frames = SubResource("SpriteFrames_2vrfn")
animation = &"idle"

[node name="CollisionShape2D" type="CollisionShape2D" parent="."]
position = Vector2(0, 11.875)
shape = SubResource("RectangleShape2D_xw3os")

[node name="boss_hitbox" type="Area2D" parent="."]
collision_layer = 4
collision_mask = 2

[node name="hitbox_collision_shape" type="CollisionShape2D" parent="boss_hitbox"]
rotation = 1.5707964
shape = SubResource("CapsuleShape2D_7byyt")

[node name="Phase1StateMachine" type="Node" parent="." node_paths=PackedStringArray("initial_state", "debug_state_label")]
script = ExtResource("2_trtgp")
initial_state = NodePath("IdleState")
debug_state_label = NodePath("../Debug")
metadata/_custom_type_script = "uid://cvisiyccpem42"

[node name="IdleState" type="Node" parent="Phase1StateMachine" node_paths=PackedStringArray("boss")]
script = ExtResource("3_0wgbl")
boss = NodePath("../..")
metadata/_custom_type_script = "uid://b2tw3xmq2dmkd"

[node name="MoveState" type="Node" parent="Phase1StateMachine" node_paths=PackedStringArray("boss")]
script = ExtResource("4_qh7uy")
boss = NodePath("../..")
metadata/_custom_type_script = "uid://bwol4gnh5hoit"

[node name="TeleportState" type="Node" parent="Phase1StateMachine" node_paths=PackedStringArray("boss")]
script = ExtResource("5_f33m0")
boss = NodePath("../..")
metadata/_custom_type_script = "uid://dpuar77scsx66"

[node name="BarageAttack" type="Node" parent="Phase1StateMachine" node_paths=PackedStringArray("boss")]
script = ExtResource("7_ejgj4")
boss = NodePath("../..")
metadata/_custom_type_script = "uid://w23uns11vmqo"

[node name="LaserAttack" type="Node" parent="Phase1StateMachine" node_paths=PackedStringArray("boss")]
script = ExtResource("8_ranff")
boss = NodePath("../..")
metadata/_custom_type_script = "uid://bh5d3cnj1qqkb"

[node name="AimAttack" type="Node" parent="Phase1StateMachine" node_paths=PackedStringArray("boss")]
script = ExtResource("6_uiuc5")
boss = NodePath("../..")
metadata/_custom_type_script = "uid://dbt6p8iuumtcu"

[node name="ChargeState" type="Node" parent="Phase1StateMachine" node_paths=PackedStringArray("boss")]
script = ExtResource("10_7byyt")
boss = NodePath("../..")
metadata/_custom_type_script = "uid://ji2we2m2t53t"

[node name="StraightAttack" type="Node" parent="Phase1StateMachine" node_paths=PackedStringArray("boss")]
script = ExtResource("11_7byyt")
boss = NodePath("../..")
metadata/_custom_type_script = "uid://cpsc7j104fhtp"

[node name="BoomerangAttack" type="Node" parent="Phase1StateMachine" node_paths=PackedStringArray("boss")]
script = ExtResource("16_8qg8b")
boss = NodePath("../..")
metadata/_custom_type_script = "uid://b43e60pq7pn5t"

[node name="RightWallCheck" type="RayCast2D" parent="."]
position = Vector2(0, 152)
target_position = Vector2(400, 0)

[node name="RightWallCheck2" type="RayCast2D" parent="."]
position = Vector2(0, -40)
target_position = Vector2(400, 0)

[node name="LeftWallCheck" type="RayCast2D" parent="."]
position = Vector2(0, 152)
target_position = Vector2(-400, 0)

[node name="LeftWallCheck2" type="RayCast2D" parent="."]
position = Vector2(0, -40)
target_position = Vector2(-400, 0)

[node name="Debug" type="Label" parent="."]
visible = false
offset_left = -104.0
offset_top = -28.0
offset_bottom = -5.0
scale = Vector2(2, 2)
text = "Current State"

[node name="Health" type="Label" parent="."]
visible = false
offset_left = -104.0
offset_top = 12.0
offset_bottom = 35.0
scale = Vector2(2, 2)
text = "Health"
horizontal_alignment = 1

[node name="HurtSound" type="AudioStreamPlayer2D" parent="."]
stream = ExtResource("22_muxuo")
volume_db = -10.0
max_distance = 10000.0

[node name="DeathSound" type="AudioStreamPlayer2D" parent="."]
stream = ExtResource("23_yahjj")
volume_db = -25.0
max_distance = 10000.0

[node name="AnimationPlayer" type="AnimationPlayer" parent="."]
libraries = {
&"": SubResource("AnimationLibrary_cyc2r")
}

[connection signal="animation_finished" from="flippable/AnimatedSprite2D" to="." method="_on_animated_sprite_2d_animation_finished"]
[connection signal="body_entered" from="boss_hitbox" to="." method="_on_boss_hitbox_body_entered"]
